<%- include('../Layouts/header.ejs') %>


<!-- Single Page Header start -->
<div class="container-fluid page-header py-5">
    <h1 class="text-center text-white display-6">Wishlist</h1>
    <ol class="breadcrumb justify-content-center mb-0">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Pages</a></li>
        <li class="breadcrumb-item active text-white">Wishlist</li>
    </ol>


    
</div>

<section>

    
<!-- wishlist Page Start -->

    <div class="container-fluid  py-5">
       
        <div class="container py-5">
            <div class="table-responsive">
                <% if (locals.wishlist) { %>
               
                <table class="table">
                    <thead>
                       
                      <tr>
                        <th scope="col">Products</th>
                        <th scope="col">Name</th>
                        <th scope="col">Price</th>
                        <th scope="col">Add to cart</th>
                        <th scope="col">Remove</th>
                      </tr>
                    </thead>
                    <% for (let i = 0; i< wishlist.length; i++) { %>
                    <tbody>

                        <tr>
                            <th scope="row">
                                <div class="d-flex align-items-center">
                                    <img src="/uploads/<%=wishlist[i].image[0] %>" class="img-fluid me-5 rounded-circle" style="width: 80px; height: 80px;" alt="">
                                </div>
                            </th>
                            <td>
                                <p class="mb-0 mt-4"> <%= wishlist[i].title %> </p>
                            </td>
                            <td>
                                <p class="mb-0 mt-4">â‚¹ <%=wishlist[i].regularPrice %> /kg</p>
                            </td>
                            <td>
                                <div class="input-group quantity mt-4" style="width: 100px;">
    
                                  <a href="/mycart" class="btn border border-secondary rounded-pill px-3 text-primary">
                                    <i class="fa fa-shopping-bag me-2 text-primary"></i> Move to cart
                                  </a>
    
                                </div>
                            </td>
                            <td>
                                <button onclick="removeFromWishlist('<%= wishlist[i]._id %>')" class="btn btn-md rounded-circle bg-light border mt-4">
                                    <i class="fa fa-times text-danger"></i>
                                </button>
                            </td>
                        
                        </tr>
                     
                    </tbody>
                    <% } %> 
                    </table>
              <% } %> 
                    
        </div>
    </div>
    </div>
 
    <!-- wishlist Page End -->
    


<!-- Single Page Header End -->



<script>

// function addToWishlist(productId) {
//   fetch(`/wishlist/add/${productId}`, {
//     method: 'POST',
//     headers: {
//        'Content-Type': 'application/json',
//     }
//   })
//   .then(response => response.json())
//   .then(data => alert(data.message))
//   .catch(error => console.error('Error:', error));
// }

function removeFromWishlist(productId) {
    fetch(`/wishlist/remove/${productId}`, {
        method: 'DELETE',
    })
    .then(response => response.json())
    .then(data => {
        if (data.message === 'Product removed from wishlist') {
            location.reload(); // Reload the page to reflect changes
        } else {
            console.error('Failed to remove product from wishlist');
        }
    })
    .catch(error => console.error('Error:', error));
}
    </script>


</section>



<%- include('../Layouts/footer.ejs') %>